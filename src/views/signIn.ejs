<%- include('partials/header', { title: 'Iniciar Sesión' }) %>

<div class="row" style="margin-top: 80px;">
  <div class="col s12 m6 offset-m3">
    <div class="card">
      <div class="card-content">
        <span class="card-title center-align">Iniciar Sesión</span>

        <form id="signin-form">
          <div class="input-field">
            <i class="material-icons prefix">email</i>
            <input id="email" name="email" type="email" required />
            <label for="email">Email</label>
          </div>

          <div class="input-field">
            <i class="material-icons prefix">lock</i>
            <input id="password" name="password" type="password" required />
            <label for="password">Contraseña</label>
          </div>

          <div class="center-align">
            <button class="btn waves-effect waves-light btn-large" type="submit">
              <i class="material-icons left">login</i>
              Entrar
            </button>
          </div>

          <div class="center-align" style="margin-top: 20px;">
            <p>¿No tienes cuenta? <a href="/signUp">Regístrate aquí</a></p>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('signin-form');
    
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        const data = {
            email: formData.get('email'),
            password: formData.get('password')
        };
        
        if (!data.email || !data.password) {
            auth.showMessage('Email y password requeridos', 'error');
            return;
        }
        
        await auth.handleSignIn(data.email, data.password);
    });
});
</script>

<%- include('partials/footer') %>
